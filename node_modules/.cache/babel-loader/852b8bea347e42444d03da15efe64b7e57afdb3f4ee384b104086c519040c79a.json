{"ast":null,"code":"export function groupBy(key) {\n  return function group(array) {\n    return array.reduce((acc, obj) => {\n      const property = obj[key];\n      const {\n        date,\n        ...rest\n      } = obj;\n      acc[property] = acc[property] || [];\n      acc[property].push(rest);\n      return acc;\n    }, {});\n  };\n}\n\n// export function getAverage(array, isRound = true) {\n//   let average = 0;\n//   if (isRound) {\n//     average = Math.round(array.reduce((a, b) => a + b, 0) / array.length);\n//     if (average === 0) {\n//       average = 0;\n//     }\n//   } else average = (array.reduce((a, b) => a + b, 0) / array.length).toFixed(2);\n\n//   return average;\n// }\n\n// export function getMostFrequentWeather(arr) {\n//   const hashmap = arr.reduce((acc, val) => {\n//     acc[val] = (acc[val] || 0) + 1;\n//     return acc;\n//   }, {});\n//   return Object.keys(hashmap).reduce((a, b) =>\n//     hashmap[a] > hashmap[b] ? a : b\n//   );\n// }\n\nexport const descriptionToIconName = (desc, descriptions_list) => {\n  let iconName = descriptions_list.find(item => item.description === desc);\n  return iconName.icon || 'unknown';\n};\nexport const getWeekForecastWeather = (response, descriptions_list) => {\n  let foreacast_data = [];\n  let descriptions_data = [];\n  if (!response || Object.keys(response).length === 0 || response.cod === '404') return [];else response === null || response === void 0 ? void 0 : response.list.slice().map((item, idx) => {\n    descriptions_data.push({\n      description: item.weather[0].description,\n      date: item.dt_txt.substring(0, 10)\n    });\n    foreacast_data.push({\n      date: item.dt_txt.substring(0, 10),\n      temp: item.main.temp,\n      humidity: item.main.humidity,\n      wind: item.wind.speed,\n      clouds: item.clouds.all\n    });\n    return {\n      idx,\n      item\n    };\n  });\n  const groupByDate = groupBy('date');\n  let grouped_forecast_data = groupByDate(foreacast_data);\n  let grouped_forecast_descriptions = groupByDate(descriptions_data);\n  const description_keys = Object.keys(grouped_forecast_descriptions);\n  let dayDescList = [];\n  description_keys.forEach(key => {\n    let singleDayDescriptions = grouped_forecast_descriptions[key].map(item => item.description);\n    let mostFrequentDescription = getMostFrequentWeather(singleDayDescriptions);\n    dayDescList.push(mostFrequentDescription);\n  });\n  const forecast_keys = Object.keys(grouped_forecast_data);\n  let dayAvgsList = [];\n  forecast_keys.forEach((key, idx) => {\n    let dayTempsList = [];\n    let dayHumidityList = [];\n    let dayWindList = [];\n    let dayCloudsList = [];\n    for (let i = 0; i < grouped_forecast_data[key].length; i++) {\n      dayTempsList.push(grouped_forecast_data[key][i].temp);\n      dayHumidityList.push(grouped_forecast_data[key][i].humidity);\n      dayWindList.push(grouped_forecast_data[key][i].wind);\n      dayCloudsList.push(grouped_forecast_data[key][i].clouds);\n    }\n    dayAvgsList.push({\n      date: key,\n      temp: getAverage(dayTempsList),\n      humidity: getAverage(dayHumidityList),\n      wind: getAverage(dayWindList, false),\n      clouds: getAverage(dayCloudsList),\n      description: dayDescList[idx],\n      icon: descriptionToIconName(dayDescList[idx], descriptions_list)\n    });\n  });\n  return dayAvgsList;\n};\nexport const getTodayForecastWeather = (response, current_date, current_datetime) => {\n  let all_today_forecasts = [];\n  if (!response || Object.keys(response).length === 0 || response.cod === '404') return [];else response === null || response === void 0 ? void 0 : response.list.slice().map(item => {\n    if (item.dt_txt.startsWith(current_date.substring(0, 10))) {\n      if (item.dt > current_datetime) {\n        all_today_forecasts.push({\n          time: item.dt_txt.split(' ')[1].substring(0, 5),\n          icon: item.weather[0].icon,\n          temperature: Math.round(item.main.temp) + ' °C'\n        });\n      }\n    }\n    return all_today_forecasts;\n  });\n  if (all_today_forecasts.length < 7) {\n    return [...all_today_forecasts];\n  } else {\n    return all_today_forecasts.slice(-6);\n  }\n};","map":{"version":3,"names":["groupBy","key","group","array","reduce","acc","obj","property","date","rest","push","descriptionToIconName","desc","descriptions_list","iconName","find","item","description","icon","getWeekForecastWeather","response","foreacast_data","descriptions_data","Object","keys","length","cod","list","slice","map","idx","weather","dt_txt","substring","temp","main","humidity","wind","speed","clouds","all","groupByDate","grouped_forecast_data","grouped_forecast_descriptions","description_keys","dayDescList","forEach","singleDayDescriptions","mostFrequentDescription","getMostFrequentWeather","forecast_keys","dayAvgsList","dayTempsList","dayHumidityList","dayWindList","dayCloudsList","i","getAverage","getTodayForecastWeather","current_date","current_datetime","all_today_forecasts","startsWith","dt","time","split","temperature","Math","round"],"sources":["C:/Users/gja53/OneDrive/Desktop/the-weather-forecasting-main/the-weather-forecasting-main/src/utilities/DataUtils.js"],"sourcesContent":["export function groupBy(key) {\n  return function group(array) {\n    return array.reduce((acc, obj) => {\n      const property = obj[key];\n      const { date, ...rest } = obj;\n      acc[property] = acc[property] || [];\n      acc[property].push(rest);\n      return acc;\n    }, {});\n  };\n}\n\n// export function getAverage(array, isRound = true) {\n//   let average = 0;\n//   if (isRound) {\n//     average = Math.round(array.reduce((a, b) => a + b, 0) / array.length);\n//     if (average === 0) {\n//       average = 0;\n//     }\n//   } else average = (array.reduce((a, b) => a + b, 0) / array.length).toFixed(2);\n\n//   return average;\n// }\n\n// export function getMostFrequentWeather(arr) {\n//   const hashmap = arr.reduce((acc, val) => {\n//     acc[val] = (acc[val] || 0) + 1;\n//     return acc;\n//   }, {});\n//   return Object.keys(hashmap).reduce((a, b) =>\n//     hashmap[a] > hashmap[b] ? a : b\n//   );\n// }\n\nexport const descriptionToIconName = (desc, descriptions_list) => {\n  let iconName = descriptions_list.find((item) => item.description === desc);\n  return iconName.icon || 'unknown';\n};\n\nexport const getWeekForecastWeather = (response, descriptions_list) => {\n  let foreacast_data = [];\n  let descriptions_data = [];\n\n  if (!response || Object.keys(response).length === 0 || response.cod === '404')\n    return [];\n  else\n    response?.list.slice().map((item, idx) => {\n      descriptions_data.push({\n        description: item.weather[0].description,\n        date: item.dt_txt.substring(0, 10),\n      });\n      foreacast_data.push({\n        date: item.dt_txt.substring(0, 10),\n        temp: item.main.temp,\n        humidity: item.main.humidity,\n        wind: item.wind.speed,\n        clouds: item.clouds.all,\n      });\n\n      return { idx, item };\n    });\n\n  const groupByDate = groupBy('date');\n  let grouped_forecast_data = groupByDate(foreacast_data);\n  let grouped_forecast_descriptions = groupByDate(descriptions_data);\n\n  const description_keys = Object.keys(grouped_forecast_descriptions);\n\n  let dayDescList = [];\n\n  description_keys.forEach((key) => {\n    let singleDayDescriptions = grouped_forecast_descriptions[key].map(\n      (item) => item.description\n    );\n    let mostFrequentDescription = getMostFrequentWeather(singleDayDescriptions);\n    dayDescList.push(mostFrequentDescription);\n  });\n\n  const forecast_keys = Object.keys(grouped_forecast_data);\n  let dayAvgsList = [];\n\n  forecast_keys.forEach((key, idx) => {\n    let dayTempsList = [];\n    let dayHumidityList = [];\n    let dayWindList = [];\n    let dayCloudsList = [];\n\n    for (let i = 0; i < grouped_forecast_data[key].length; i++) {\n      dayTempsList.push(grouped_forecast_data[key][i].temp);\n      dayHumidityList.push(grouped_forecast_data[key][i].humidity);\n      dayWindList.push(grouped_forecast_data[key][i].wind);\n      dayCloudsList.push(grouped_forecast_data[key][i].clouds);\n    }\n\n    dayAvgsList.push({\n      date: key,\n      temp: getAverage(dayTempsList),\n      humidity: getAverage(dayHumidityList),\n      wind: getAverage(dayWindList, false),\n      clouds: getAverage(dayCloudsList),\n      description: dayDescList[idx],\n      icon: descriptionToIconName(dayDescList[idx], descriptions_list),\n    });\n  });\n\n  return dayAvgsList;\n};\n\nexport const getTodayForecastWeather = (\n  response,\n  current_date,\n  current_datetime\n) => {\n  let all_today_forecasts = [];\n\n  if (!response || Object.keys(response).length === 0 || response.cod === '404')\n    return [];\n  else\n    response?.list.slice().map((item) => {\n      if (item.dt_txt.startsWith(current_date.substring(0, 10))) {\n        if (item.dt > current_datetime) {\n          all_today_forecasts.push({\n            time: item.dt_txt.split(' ')[1].substring(0, 5),\n            icon: item.weather[0].icon,\n            temperature: Math.round(item.main.temp) + ' °C',\n          });\n        }\n      }\n      return all_today_forecasts;\n    });\n\n  if (all_today_forecasts.length < 7) {\n    return [...all_today_forecasts];\n  } else {\n    return all_today_forecasts.slice(-6);\n  }\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}